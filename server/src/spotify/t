  async mediaServerOp(method: string, url: string, body: any = {}) {
    let devices = await this.deviceService.getActive()
    if (!devices) {
      return 0
    }

    for (var i = 0; i < devices.length; i++) {
      try {
        let apiUrl = devices[i].apiUrl + url
        let res: any = {}

        if (body && ['PUT', 'POST'].includes(method.toUpperCase())) {
          res = await fetch(apiUrl, {
            method: method.toUpperCase(),
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(body),
          })
        } else {
          res = await fetch(apiUrl, {
            method: method.toUpperCase(),
          })
        }
      } catch (err) {
        console.log(err)
      }
    }

    return devices.length
  }

  async mediaServerGet(method: string, url: string, body: any = {}) {
    let devices = await this.deviceService.getActive()

    if (!devices) {
      return 0
    }

    let res: any = {}

    for (var i = 0; i < devices.length; i++) {
      try {
        let apiUrl = devices[i].apiUrl + url

        if (body && ['PUT', 'POST'].includes(method.toUpperCase())) {
          res = await fetch(apiUrl, {
            method: method.toUpperCase(),
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(body),
          })
        } else {
          res = await fetch(apiUrl, {
            method: method.toUpperCase(),
          })
        }
      } catch (err) {
        console.log(err)
      }
    }

    return res
  }
}
